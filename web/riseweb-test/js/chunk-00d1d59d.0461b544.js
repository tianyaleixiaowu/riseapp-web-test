(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00d1d59d"],{"07b6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pic upload"},[i("div",{staticClass:"picTop"},[i("span",[t._v(t._s(t.label))]),i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),i("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange}})]),t.process?i("div",{staticClass:"process"},[t._v("\n                上传进度："+t._s(t.process)+"\n            ")]):t._e()])],1),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.imageList.length>0,expression:"imageList.length > 0"}],staticClass:"list"},t._l(t.imageList,function(e,n){return i("li",{key:n},[i("div",[t._v("链接地址："),i("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(e))])]),i("div",{on:{click:function(i){t.del(e,n)}}},[t._v("删除")])])}),0)])},a=[],u=(i("28a5"),i("fc37")),r={props:["label","defaultValue"],data:function(){return{imageList:[],loading:!1,process:""}},methods:{fileChange:function(t){var e=this;this.loading=!0,this.process="",Object(u["b"])(t,function(t){e.loading=!1,e.process="",e.imageList.unshift(t.url)},function(t){e.process=t})},del:function(t,e){var i=this.imageList.filter(function(e){return t!==e});this.imageList=i},getData:function(){var t=this.imageList.join(",");return t}},watch:{defaultValue:function(){this.imageList=this.defaultValue.split(",")}}},l=r,s=(i("ae01"),i("2877")),o=Object(s["a"])(l,n,a,!1,null,null,null);o.options.__file="picupload.vue";e["a"]=o.exports},"1de4":function(t,e,i){},"28a5":function(t,e,i){"use strict";var n=i("aae3"),a=i("cb7c"),u=i("ebd6"),r=i("0390"),l=i("9def"),s=i("5f1b"),o=i("520a"),d=Math.min,c=[].push,f="split",p="length",h="lastIndex",v=!!function(){try{return new RegExp("x","y")}catch(t){}}();i("214f")("split",2,function(t,e,i,g){var m;return m="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(a,t,e);var u,r,l,s=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,d+"g");while(u=o.call(g,a)){if(r=g[h],r>f&&(s.push(a.slice(f,u.index)),u[p]>1&&u.index<a[p]&&c.apply(s,u.slice(1)),l=u[0][p],f=r,s[p]>=v))break;g[h]===u.index&&g[h]++}return f===a[p]?!l&&g.test("")||s.push(""):s.push(a.slice(f)),s[p]>v?s.slice(0,v):s}:"0"[f](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var a=t(this),u=void 0==i?void 0:i[e];return void 0!==u?u.call(i,a,n):m.call(String(a),i,n)},function(t,e){var n=g(m,t,this,e,m!==i);if(n.done)return n.value;var o=a(t),c=String(this),f=u(o,RegExp),p=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"y":"g"),y=new f(v?o:"^(?:"+o.source+")",h),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===c.length)return null===s(y,c)?[c]:[];var _=0,V=0,x=[];while(V<c.length){y.lastIndex=v?V:0;var K,k=s(y,v?c:c.slice(V));if(null===k||(K=d(l(y.lastIndex+(v?0:V)),c.length))===_)V=r(c,V,p);else{if(x.push(c.slice(_,V)),x.length===b)return x;for(var C=1;C<=k.length-1;C++)if(x.push(k[C]),x.length===b)return x;V=_=K}}return x.push(c.slice(_)),x}]})},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"3dcc":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"rise x add"},[i("div",{staticClass:"title"},[t._v(t._s(t.header))]),i("div",{staticClass:"content"},[t._l(t.data,function(e,n){return i("div",{key:n,staticClass:"item"},[i("span",[t._v(t._s(e.name))]),e.type?t._e():i("div",["title"===e.module?i("el-input",{attrs:{placeholder:e.placeholder},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}):t._e()],1),"select"===e.type?i("div",["type"===e.module?i("el-select",{attrs:{placeholder:"全部"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(e.options,function(t){return i("el-option",{key:t.id,attrs:{label:t.dValue,value:t.id}})}),1):t._e()],1):t._e()])}),i("mediaupload",{ref:"mediaup",staticStyle:{marginBottom:"15px"},attrs:{label:"音视频上传：",defaultValue:t.mediaDefault}}),i("picupload",{ref:"picup",attrs:{label:"背景图上传：",defaultValue:t.picDefault}}),i("div",{staticClass:"item"},[i("span",[t._v("媒体介绍：")]),i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入媒体介绍"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],2),i("div",{staticClass:"btn-list"},[i("el-button",{staticClass:"btn",on:{click:function(e){t.cancle()}}},[t._v("取消")]),i("el-button",{staticClass:"btn",on:{click:function(e){t.save()}}},[t._v("保存")])],1)])])},a=[],u=(i("b383"),i("3ebc")),r=i("07b6"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pic upload"},[i("div",{staticClass:"picTop"},[i("span",[t._v(t._s(t.label))]),i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[i("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upMedia"}}),i("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upMedia"},on:{change:t.fileChange}})]),t.process?i("div",{staticClass:"process"},[t._v("\n                上传进度："+t._s(t.process)+"\n            ")]):t._e()])],1),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.imageList.length>0,expression:"imageList.length > 0"}],staticClass:"list"},t._l(t.imageList,function(e,n){return i("li",{key:n},[i("div",[t._v("链接地址："),i("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(e))])]),i("div",{on:{click:function(i){t.del(e,n)}}},[t._v("删除")])])}),0)])},s=[],o=(i("28a5"),i("fc37")),d={props:["label","defaultValue"],data:function(){return{imageList:[],loading:!1,process:""}},methods:{fileChange:function(t){var e=this;this.loading=!0,this.process="",Object(o["b"])(t,function(t){e.loading=!1,e.process="",e.imageList.unshift(t.url)},function(t){e.process=t})},del:function(t,e){var i=this.imageList.filter(function(e){return t!==e});this.imageList=i},getData:function(){var t=this.imageList.join(",");return t}},watch:{defaultValue:function(){this.imageList=this.defaultValue.split(",")}}},c=d,f=(i("77dc"),i("2877")),p=Object(f["a"])(c,l,s,!1,null,null,null);p.options.__file="mediaupload.vue";var h=p.exports,v=["新建","编辑"],g=[{name:"媒体标题：",placeholder:"请输入媒体标题",module:"title"},{name:"媒体类型：",placeholder:"请选择媒体类型",module:"type",type:"select",options:u["j"]}],m={name:"add",data:function(){return{title:"",header:"",id:"",name:"",remark:"",type:"",types:"",mediaDefault:null,picDefault:null,data:g,loading:!1}},components:{Picupload:r["a"],Mediaupload:h},mounted:function(){this.dataInit()},methods:{dataInit:function(){var t=this.$route.query,e=t.type,i=t.id;if(this.types=e,this.id=i,"edit"!==e)return this.header=v[0];this.header=v[1],this.detailAjax()},editInit:function(t){var e=t.data,i=e.remark,n=e.title,a=e.pics,u=e.url,r=e.type;this.remark=i,this.title=n,this.type=r,this.picDefault=a,this.mediaDefault=u},detailAjax:function(){var t=this;this.loading=!0,this.api.get("/media/".concat(this.id)).then(function(e){t.loading=!1,t.editInit(e)}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.message)})},editAjax:function(){var t=this,e={remark:this.remark,title:this.title,type:this.type};e.pics=this.$refs.picup.getData(),e.url=this.$refs.mediaup.getData();var i=["post","put"],n=i[0];"edit"===this.types&&(e.id=this.id,n=i[1]),this.loading=!0,this.api[n]("/media",e,"form").then(function(e){t.loading=!1,t.$router.go(-1)}).catch(function(e){t.loading=!1,console.log(e),t.$message(e.message)})},save:function(){this.editAjax()},cancle:function(){this.$router.go(-1)}}},y=m,b=(i("92c9"),Object(f["a"])(y,n,a,!1,null,"27958fb9",null));b.options.__file="add.vue";e["default"]=b.exports},"3ebc":function(t,e,i){"use strict";i.d(e,"g",function(){return a}),i.d(e,"i",function(){return r}),i.d(e,"f",function(){return d}),i.d(e,"j",function(){return c}),i.d(e,"h",function(){return l}),i.d(e,"a",function(){return s}),i.d(e,"b",function(){return u}),i.d(e,"d",function(){return o}),i.d(e,"e",function(){return f}),i.d(e,"c",function(){return p}),i.d(e,"k",function(){return h}),i.d(e,"l",function(){return v});i("7f7f"),i("cadf"),i("551c"),i("097d"),i("2ef0");var n=i("7c15");function a(t,e,i){return n["a"].get("/role").then(function(n){var a=n.data.map(function(t){var e={id:t.id,dKey:t.id,dValue:t.sign};return e});if("filter"!=e&&a.unshift({id:"",dKey:"",dValue:"全部"}),"less"===i){var u=["超级管理员","学员"];a=a.filter(function(t){return-1==u.indexOf(t.dValue)})}return t&&t(a),n.data}).catch(function(t){console.log(t)}),[]}function u(t,e,i){n["a"].get("/user?schoolId=".concat(t,"&roleId=3&page=0&size=1000000")).then(function(t){var n=t.data.list.map(function(t){var e={id:t.id,dKey:t.account,dValue:t.name};return e});"filter"!=i&&n.unshift({id:"",dKey:"",dValue:"全部"});var a=[];return n=n.filter(function(t){return-1==a.indexOf(t.dKey)&&(a.push(t.dKey),!0)}),e&&e(n),t.data}).catch(function(t){console.log(t)})}function r(t,e){return n["a"].get("/user?roleId=2").then(function(i){var n=i.data.list.map(function(t){var e={id:t.id,dKey:t.id,dValue:t.name};return e});return"filter"!=e&&n.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(n),i.data}).catch(function(t){console.log(t)}),[]}function l(t,e){n["a"].get("/school").then(function(i){var n=i.data.map(function(t){var e={id:t.id,dKey:t.id,dValue:t.name};return e});return"filter"!=e&&n.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(n),i.data}).catch(function(t){console.log(t)})}function s(t,e,i){n["a"].get("/class?schoolId=".concat(t)).then(function(t){var n=t.data.map(function(t){var e={id:t.id,dKey:t.id,dValue:t.name};return e});return"filter"!=i&&n.unshift({id:"",dKey:"",dValue:"全部"}),e&&e(n),t.data}).catch(function(t){console.log(t)})}function o(t,e){n["a"].get("/goods").then(function(i){var n=i.data.list.map(function(t){var e={id:t.id,dKey:t.id,dValue:t.name};return e});return"filter"!=e&&n.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(n),i.data}).catch(function(t){console.log(t)})}function d(t,e){var i=[{id:0,dKey:0,dValue:"未发货"},{id:1,dKey:1,dValue:"已发货"},{id:2,dKey:2,dValue:"已收货"},{id:3,dKey:3,dValue:"已取消"}];return"filter"!=e&&i.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(i),i}var c=[{id:-1,dKey:"",dValue:"全部"},{id:1,dKey:1,dValue:"音频"},{id:2,dKey:2,dValue:"视频"}];function f(t,e){var i=[{id:0,dKey:0,dValue:"未审核"},{id:1,dKey:1,dValue:"审核无效"},{id:2,dKey:2,dValue:"审核通过"}];return"filter"!=e&&i.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(i),i}function p(t,e){var i=[{id:0,dKey:0,dValue:"未成交"},{id:1,dKey:1,dValue:"已成交未返卷"},{id:2,dKey:2,dValue:"已成交已返卷"}];return"filter"!=e&&i.unshift({id:"",dKey:"",dValue:"全部"}),t&&t(i),i}var h=[{id:0,dKey:0,dValue:"选择题"},{id:1,dKey:1,dValue:"问答题"}],v=[{id:0,dKey:"A",dValue:"A"},{id:1,dKey:"B",dValue:"B"},{id:2,dKey:"C",dValue:"C"},{id:3,dKey:"D",dValue:"D"},{id:4,dKey:"E",dValue:"E"},{id:5,dKey:"F",dValue:"F"},{id:6,dKey:"G",dValue:"G"},{id:7,dKey:"H",dValue:"H"},{id:8,dKey:"I",dValue:"I"}]},"58c9":function(t,e,i){},"5d6b":function(t,e,i){var n=i("e53d").parseInt,a=i("a1ce").trim,u=i("e692"),r=/^[-+]?0[xX]/;t.exports=8!==n(u+"08")||22!==n(u+"0x16")?function(t,e){var i=a(String(t),3);return n(i,e>>>0||(r.test(i)?16:10))}:n},"67dd":function(t,e,i){},"6b54":function(t,e,i){"use strict";i("3846");var n=i("cb7c"),a=i("0bfb"),u=i("9e1e"),r="toString",l=/./[r],s=function(t){i("2aba")(RegExp.prototype,r,t,!0)};i("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?s(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?a.call(t):void 0)}):l.name!=r&&s(function(){return l.call(this)})},7445:function(t,e,i){var n=i("63b6"),a=i("5d6b");n(n.G+n.F*(parseInt!=a),{parseInt:a})},"77dc":function(t,e,i){"use strict";var n=i("1de4"),a=i.n(n);a.a},"92c9":function(t,e,i){"use strict";var n=i("58c9"),a=i.n(n);a.a},a1ce:function(t,e,i){var n=i("63b6"),a=i("25eb"),u=i("294c"),r=i("e692"),l="["+r+"]",s="​",o=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$"),c=function(t,e,i){var a={},l=u(function(){return!!r[t]()||s[t]()!=s}),o=a[t]=l?e(f):r[t];i&&(a[i]=o),n(n.P+n.F*l,"String",a)},f=c.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(d,"")),t};t.exports=c},aae3:function(t,e,i){var n=i("d3f4"),a=i("2d95"),u=i("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[u])?!!e:"RegExp"==a(t))}},ae01:function(t,e,i){"use strict";var n=i("67dd"),a=i.n(n);a.a},b9e9:function(t,e,i){i("7445"),t.exports=i("584a").parseInt},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,i){t.exports=i("b9e9")},fc37:function(t,e,i){"use strict";i.d(e,"c",function(){return l}),i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o});i("7f7f"),i("6b54"),i("28a5");var n=i("e814"),a=i.n(n),u=(i("2ef0"),i("bc3a")),r=i.n(u);function l(t){if(!t)return"";var e=new Date(t).getFullYear(),i=new Date(t).getMonth()+1,n=new Date(t).getDate();return i<10&&(i="0"+a()(i)),n<10&&(n="0"+a()(n)),"".concat(e,"-").concat(i,"-").concat(n)}function s(t){if(!t)return"";var e=new Date(t).getTime();return"".concat(e)}function o(t,e,i){if(t){var n=t.target.files[0];if(n){var a=new FormData;a.append("chunk","0"),a.append("chunks","1"),a.append("file",n,n.name);var u={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var e=(t.loaded/t.total*100|0)+"%";i&&i(e)}};r.a.get("/login/qiniu/token").then(function(t){var i=t.data.data;a.append("token",i),d(a,u,e)})}}}function d(t,e,i){r.a.post("http://upload-z1.qiniup.com/",t,e).then(function(t){var e={message:"ok",url:"http://qiniu.tianyalei.com/".concat(t.data.key)};i&&i(e)}).catch(function(t){console.log(t,"pppp")})}}}]);
//# sourceMappingURL=chunk-00d1d59d.0461b544.js.map