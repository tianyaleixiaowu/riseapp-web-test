{"version":3,"sources":["webpack:///./src/views/service/serviceQuestion/control/statistic.vue?081d","webpack:///src/views/service/serviceQuestion/control/statistic.vue","webpack:///./src/views/service/serviceQuestion/control/statistic.vue?250c","webpack:///./src/views/service/serviceQuestion/control/statistic.vue","webpack:///./src/views/service/serviceQuestion/control/statistic.vue?2c98"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","data","dataOption","on","change","optchange","_v","_s","name","_l","item","index","key","title","type","style","width","height","data-index","_e","item2","index2","userName","content","staticRenderFns","leftMenu","id","placeholder","module","rightMenu","statisticvue_type_script_lang_js_","loading","components","Options","options","mounted","init","search","dropInit","methods","_this","Object","listBody","res","map","_this$$route$query","$route","query","params","console","log","btnClick","echartsInit","_this2","mycharts","document","querySelectorAll","forEach","answerList","length","ansName","item1","item3","item4","item5","ansNum","obj","myChart","echarts","seriesData","value","push","setOption","tooltip","trigger","formatter","position","legend","x","series","radius","center","avoidLabelOverlap","label","normal","show","emphasis","textStyle","fontSize","fontWeight","_this3","optParams","$refs","goodsOpt","getData","assign_default","param","querystring_es3_default","a","stringify","api","get","concat","then","questionList","setTimeout","catch","err","$message","message","$router","go","dataInit","control_statisticvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_statistic_vue_vue_type_style_index_0_id_729e73b0_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_statistic_vue_vue_type_style_index_0_id_729e73b0_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-a6412aa8.2032858a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"statistic\"},[_c('options',{ref:\"goodsOpt\",attrs:{\"data\":_vm.dataOption},on:{\"change\":_vm.optchange}}),_c('div',{staticClass:\"title\"},[_vm._v(\"问卷名称：\"+_vm._s(_vm.name))]),_c('div',{staticClass:\"content\"},_vm._l((_vm.data),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),(item.type == 0)?_c('div',{staticClass:\"myChart\",style:({width: '400px', height: '400px'}),attrs:{\"data-index\":index}}):_vm._e(),(item.type == 1)?_c('div',{staticClass:\"list\"},_vm._l((item.answerList),function(item2,index2){return _c('div',{key:index2,staticClass:\"list-item\"},[_vm._v(_vm._s(item2.userName)+\": \"+_vm._s(item2.content))])}),0):_vm._e()])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"statistic\">\r\n        <options :data=\"dataOption\" v-on:change=\"optchange\" ref=\"goodsOpt\"/>\r\n        <div class=\"title\">问卷名称：{{name}}</div>\r\n        <div class=\"content\">\r\n            <div class=\"item\" v-for = \"(item, index) in data\" :key=\"index\">\r\n                <div class=\"title\">{{item.title}}</div>   \r\n                <div v-if=\"item.type == 0\" class=\"myChart\" :data-index=\"index\" :style=\"{width: '400px', height: '400px'}\"></div>\r\n                <div class=\"list\" v-if=\"item.type == 1\">\r\n                    <div class=\"list-item\" v-for = \"(item2, index2) in item.answerList\" :key=\"index2\">{{item2.userName}}: {{item2.content}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- <div class=\"footer\">\r\n            <el-button @click=\"btnClick()\" class=\"btn\" type=\"primary\">取消</el-button>\r\n        </div> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Options from 'views/common/options';\r\nimport queryString from \"querystring\";\r\nimport { getSchool, getClass, getTeachers } from \"data/listBody\";\r\n\r\nconst dataOption = {\r\n  leftMenu: [\r\n    { id:'1', name:'校区：', placeholder:'请选择校区', module:'schoolId', type:'select'},\r\n    { id:'2', name:'班级：', placeholder:'请选择班级', module:'classId', type:'select'},\r\n    { id:'3', name:'带班老师：', placeholder:'请选择带班老师', module:'teacherAccount', type:'select'},\r\n  ],\r\n  rightMenu: [\r\n    { id:'r1', name:'查询'},\r\n    { id:'r3', name:'取消'}\r\n  ]\r\n}\r\n\r\nexport default {\r\n    name: \"statistic\",\r\n    data() {\r\n        return {\r\n            dataOption: dataOption,\r\n            loading: false,\r\n            id: \"\",\r\n            type: \"\",\r\n            name: \"\",\r\n            data: \"\",\r\n        };\r\n    },\r\n    components: {\r\n        Options,\r\n    },\r\n    mounted() {\r\n        this.init();\r\n        this.search();\r\n        this.dropInit();\r\n    },\r\n    methods: {\r\n        dropInit() {\r\n            getSchool(res => {\r\n                let { leftMenu } = this.dataOption;\r\n                leftMenu = leftMenu.map(item => {\r\n                if (item.module === \"schoolId\") item.options = res;\r\n                return item;\r\n                });\r\n                this.dataOption.leftMenu = leftMenu;\r\n            });\r\n        },\r\n        init() {\r\n            const { type, id, name } = this.$route.query;\r\n            this.type = type;\r\n            this.id = id;\r\n            this.name = name;\r\n        },\r\n        optchange(params){\r\n            console.log(params.id + '--id被单击了')\r\n            if(params.id === 'r1') return this.search();\r\n            if(params.id === 'r3') return this.btnClick();\r\n        },\r\n        echartsInit() {\r\n            const mycharts = document.querySelectorAll('.myChart');\r\n            this.data.forEach((item, index) => {\r\n                // 选择题\r\n                if(item.type == 0){\r\n                    const ansTotal = item.answerList.length;\r\n                    let ansName = [item.item1, item.item2, item.item3, item.item4, item.item5];\r\n                    let ansNum = [0, 0, 0, 0, 0];\r\n\r\n                    item.answerList.forEach(obj => {\r\n                        if(obj.item1) ansNum[0]++;\r\n                        if(obj.item2) ansNum[1]++;\r\n                        if(obj.item3) ansNum[2]++;\r\n                        if(obj.item4) ansNum[3]++;\r\n                        if(obj.item5) ansNum[4]++;\r\n                    });\r\n                    let myChart = this.echarts.init(mycharts[index]);\r\n                    let seriesData = [];\r\n                    ansName.forEach((item, index) => {\r\n                        if(item){\r\n                            let obj = {\r\n                                value: ansNum[index],\r\n                                name: item\r\n                            }\r\n                            seriesData.push(obj);\r\n                        } \r\n                    })\r\n                    myChart.setOption({\r\n                        tooltip : {\r\n                            trigger: 'item',\r\n                            formatter: \"{a} <br/>{b} : {c}人 ({d}%)\",\r\n                            position: [10, 10]\r\n                        },\r\n                        legend: {\r\n                            // orient: 'vertical',\r\n                            x: 'left',\r\n                            data:ansName\r\n                        },\r\n                        series : [\r\n                            {\r\n                                name: item.title,\r\n                                type: 'pie',\r\n                                radius : ['50%', '70%'],\r\n                                center: ['50%', '50%'],\r\n                                avoidLabelOverlap: false,\r\n                                label: {\r\n                                    normal: {\r\n                                        show: false,\r\n                                        position: 'center'\r\n                                    },\r\n                                    emphasis: {\r\n                                        show: true,\r\n                                        textStyle: {\r\n                                            fontSize: '16',\r\n                                            fontWeight: '200'\r\n                                        }\r\n                                    }\r\n                                },\r\n                                // itemStyle: {\r\n                                //     normal: {\r\n                                //         label: {        //此处为指示线文字\r\n                                //             show: true,\r\n                                //             position: 'center', //标签的位置\r\n                                //             textStyle: {\r\n                                //                 fontWeight: 200,\r\n                                //                 fontSize: 12    //文字的字体大小\r\n                                //             },\r\n                                //             formatter: function (p) {   //指示线对应文字\r\n                                //                 var data = p.data;\r\n                                //                 return data.name;\r\n                                //             }\r\n                                //         },\r\n                                //         labelLine: {    //指示线状态\r\n                                //             show: true,\r\n                                //             smooth: 0.2,\r\n                                //             length: 10,\r\n                                //             length2: 20\r\n                                //         }\r\n                                //     }\r\n                                // },\r\n                                data: seriesData\r\n                            }\r\n                        ]\r\n                    });\r\n                }\r\n                // 问答题\r\n                if(item.type == 1){\r\n\r\n                }\r\n            })\r\n        },\r\n        search() {\r\n            //搜索\r\n            this.loading = true;\r\n            const optParams = this.$refs.goodsOpt.getData();\r\n            const params = Object.assign({}, optParams);\r\n            const param = queryString.stringify(params || {});\r\n\r\n            this.api.get(`/survey/${this.id}/answer?${param}`).then(res => {\r\n                this.loading = false;\r\n                this.data = res.data.questionList;\r\n                setTimeout(()=>{\r\n                    this.echartsInit(res);\r\n                },20)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                this.loading = false;\r\n                this.$message(err.message);\r\n            });\r\n        },\r\n        btnClick(){\r\n            this.$router.go(-1)\r\n        },\r\n        dataInit() {\r\n            //数据初始化\r\n        }\r\n    }\r\n};\r\n</script>\r\n \r\n<style lang=\"less\" scoped>\r\n.statistic {\r\n    .title,.content,.footer{\r\n        padding: 40px;\r\n    }\r\n    .title{\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        padding-bottom: 30px;\r\n    }\r\n    .item{\r\n        .title{\r\n            font-size: 16px;\r\n            padding: 0;\r\n            margin-bottom: 10px;\r\n        }\r\n        .list{\r\n            padding-top: 10px;\r\n            height: 100px;\r\n            overflow: auto;\r\n            width: 50%;\r\n            .list-item{\r\n                padding: 5px 0;\r\n            }\r\n        }\r\n    }\r\n    .footer{\r\n        margin-top: 20px;\r\n    }\r\n}\r\n</style>\r\n ","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./statistic.vue?vue&type=template&id=729e73b0&scoped=true&\"\nimport script from \"./statistic.vue?vue&type=script&lang=js&\"\nexport * from \"./statistic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./statistic.vue?vue&type=style&index=0&id=729e73b0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"729e73b0\",\n  null\n  \n)\n\ncomponent.options.__file = \"statistic.vue\"\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=style&index=0&id=729e73b0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statistic.vue?vue&type=style&index=0&id=729e73b0&lang=less&scoped=true&\""],"sourceRoot":""}