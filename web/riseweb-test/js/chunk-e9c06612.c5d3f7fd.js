(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9c06612"],{"07b6":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pic upload"},[n("div",{staticClass:"picTop"},[n("span",[t._v(t._s(t.label))]),n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[n("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),n("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange}})]),t.process?n("div",{staticClass:"process"},[t._v("\n                上传进度："+t._s(t.process)+"\n            ")]):t._e()])],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.imageList.length>0,expression:"imageList.length > 0"}],staticClass:"list"},t._l(t.imageList,function(e,i){return n("li",{key:i},[n("div",[t._v("链接地址："),n("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(e))])]),n("div",{on:{click:function(n){t.del(e,i)}}},[t._v("删除")])])}),0)])},a=[],s=(n("28a5"),n("fc37")),o={props:["label","defaultValue"],data:function(){return{imageList:[],loading:!1,process:""}},methods:{fileChange:function(t){var e=this;this.loading=!0,this.process="",Object(s["b"])(t,function(t){e.loading=!1,e.process="",e.imageList.unshift(t.url)},function(t){e.process=t})},del:function(t,e){var n=this.imageList.filter(function(e){return t!==e});this.imageList=n},getData:function(){var t=this.imageList.join(",");return t}},watch:{defaultValue:function(){this.imageList=this.defaultValue.split(",")}}},c=o,l=(n("ae01"),n("2877")),r=Object(l["a"])(c,i,a,!1,null,null,null);r.options.__file="picupload.vue";e["a"]=r.exports},"07f5":function(t,e,n){"use strict";var i=n("3f46"),a=n.n(i);a.a},"28a5":function(t,e,n){"use strict";var i=n("aae3"),a=n("cb7c"),s=n("ebd6"),o=n("0390"),c=n("9def"),l=n("5f1b"),r=n("520a"),u=Math.min,d=[].push,f="split",p="length",h="lastIndex",g=!!function(){try{return new RegExp("x","y")}catch(t){}}();n("214f")("split",2,function(t,e,n,v){var m;return m="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(a,t,e);var s,o,c,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,u+"g");while(s=r.call(v,a)){if(o=v[h],o>f&&(l.push(a.slice(f,s.index)),s[p]>1&&s.index<a[p]&&d.apply(l,s.slice(1)),c=s[0][p],f=o,l[p]>=g))break;v[h]===s.index&&v[h]++}return f===a[p]?!c&&v.test("")||l.push(""):l.push(a.slice(f)),l[p]>g?l.slice(0,g):l}:"0"[f](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var a=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,a,i):m.call(String(a),n,i)},function(t,e){var i=v(m,t,this,e,m!==n);if(i.done)return i.value;var r=a(t),d=String(this),f=s(r,RegExp),p=r.unicode,h=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(g?"y":"g"),b=new f(g?r:"^(?:"+r.source+")",h),x=void 0===e?4294967295:e>>>0;if(0===x)return[];if(0===d.length)return null===l(b,d)?[d]:[];var _=0,w=0,k=[];while(w<d.length){b.lastIndex=g?w:0;var y,C=l(b,g?d:d.slice(w));if(null===C||(y=u(c(b.lastIndex+(g?0:w)),d.length))===_)w=o(d,w,p);else{if(k.push(d.slice(_,w)),k.length===x)return k;for(var D=1;D<=C.length-1;D++)if(k.push(C[D]),k.length===x)return k;w=_=y}}return k.push(d.slice(_)),k}]})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3f46":function(t,e,n){},"5d6b":function(t,e,n){var i=n("e53d").parseInt,a=n("a1ce").trim,s=n("e692"),o=/^[-+]?0[xX]/;t.exports=8!==i(s+"08")||22!==i(s+"0x16")?function(t,e){var n=a(String(t),3);return i(n,e>>>0||(o.test(n)?16:10))}:i},"67dd":function(t,e,n){},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),a=n("0bfb"),s=n("9e1e"),o="toString",c=/./[o],l=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?a.call(t):void 0)}):c.name!=o&&l(function(){return c.call(this)})},7445:function(t,e,n){var i=n("63b6"),a=n("5d6b");i(i.G+i.F*(parseInt!=a),{parseInt:a})},a1ce:function(t,e,n){var i=n("63b6"),a=n("25eb"),s=n("294c"),o=n("e692"),c="["+o+"]",l="​",r=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(t,e,n){var a={},c=s(function(){return!!o[t]()||l[t]()!=l}),r=a[t]=c?e(f):o[t];n&&(a[n]=r),i(i.P+i.F*c,"String",a)},f=d.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(r,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},aae3:function(t,e,n){var i=n("d3f4"),a=n("2d95"),s=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==a(t))}},ae01:function(t,e,n){"use strict";var i=n("67dd"),a=n.n(i);a.a},b9e9:function(t,e,n){n("7445"),t.exports=n("584a").parseInt},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,n){t.exports=n("b9e9")},f64f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"rise x add"},[n("div",{staticClass:"title"},[t._v(t._s(t.header))]),n("div",{staticClass:"content"},[t._l(t.data,function(e,i){return n("div",{key:i,staticClass:"item"},[n("span",[t._v(t._s(e.name))]),"title"===e.module?n("el-input",{attrs:{placeholder:e.placeholder},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}):t._e(),"beginTime"===e.module?n("el-date-picker",{attrs:{placeholder:e.placeholder,type:"date"},model:{value:t.beginTime,callback:function(e){t.beginTime=e},expression:"beginTime"}}):t._e()],1)}),n("picupload",{ref:"picup",attrs:{label:"公告图片：",defaultValue:t.picDefault}}),n("div",{staticClass:"item"},[n("span",[t._v("公告内容：")]),n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入公告内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],2),n("div",{staticClass:"btn-list"},[n("el-button",{staticClass:"btn",on:{click:function(e){t.cancle()}}},[t._v("取消")]),n("el-button",{staticClass:"btn",on:{click:function(e){t.save()}}},[t._v("保存")])],1)])])},a=[],s=(n("b383"),n("fc37"),n("07b6")),o=["新建","编辑"],c=[{name:"公告标题：",placeholder:"请输入公告标题",module:"title"}],l={name:"add",data:function(){return{title:"",id:"",header:"",type:"",content:"",picDefault:null,data:c,loading:!1}},components:{Picupload:s["a"]},mounted:function(){this.dataInit()},methods:{dataInit:function(){var t=this.$route.query,e=t.type,n=t.id;if(this.type=e,"edit"!==e)return this.header=o[0];this.header=o[1],this.id=n,this.detailAjax()},editInit:function(t){var e=t.data,n=e.title,i=e.content,a=e.pics;this.title=n,this.content=i,this.picDefault=a},detailAjax:function(){var t=this;this.loading=!0,this.api.get("/notice/".concat(this.id)).then(function(e){t.loading=!1,t.editInit(e)}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.message)})},editAjax:function(){var t=this,e={title:this.title,content:this.content};e.pics=this.$refs.picup.getData();var n=["post","put"],i=n[0];"edit"===this.type&&(e.id=this.id,i=n[1]),this.loading=!0,this.api[i]("/notice",e,"form").then(function(e){t.loading=!1,t.$router.go(-1)}).catch(function(e){t.loading=!1,console.log(e),t.$message(e.message)})},save:function(){this.editAjax()},cancle:function(){this.$router.go(-1)}}},r=l,u=(n("07f5"),n("2877")),d=Object(u["a"])(r,i,a,!1,null,"d214f310",null);d.options.__file="add.vue";e["default"]=d.exports},fc37:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return r});n("7f7f"),n("6b54"),n("28a5");var i=n("e814"),a=n.n(i),s=(n("2ef0"),n("bc3a")),o=n.n(s);function c(t){if(!t)return"";var e=new Date(t).getFullYear(),n=new Date(t).getMonth()+1,i=new Date(t).getDate();return n<10&&(n="0"+a()(n)),i<10&&(i="0"+a()(i)),"".concat(e,"-").concat(n,"-").concat(i)}function l(t){if(!t)return"";var e=new Date(t).getTime();return"".concat(e)}function r(t,e,n){if(t){var i=t.target.files[0];if(i){var a=new FormData;a.append("chunk","0"),a.append("chunks","1"),a.append("file",i,i.name);var s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var e=(t.loaded/t.total*100|0)+"%";n&&n(e)}};o.a.get("/login/qiniu/token").then(function(t){var n=t.data.data;a.append("token",n),u(a,s,e)})}}}function u(t,e,n){o.a.post("http://upload-z1.qiniup.com/",t,e).then(function(t){var e={message:"ok",url:"http://qiniu.tianyalei.com/".concat(t.data.key)};n&&n(e)}).catch(function(t){console.log(t,"pppp")})}}}]);
//# sourceMappingURL=chunk-e9c06612.c5d3f7fd.js.map